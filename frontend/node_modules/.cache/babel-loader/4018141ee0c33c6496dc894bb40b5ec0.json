{"ast":null,"code":"//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { apiService } from \"../common/api.service.js\";\nexport default {\n  name: \"MyHome\",\n\n  data() {\n    return {\n      workouts: [],\n      user_list: {},\n      user: null,\n      part_of_body: null,\n      workout: null,\n      memo: null,\n      body_items: [\"腹\", \"腕\", \"背中\", \"胸\", \"脚\", \"肩\"],\n      dialog: false,\n      next: null,\n      loading: false\n    };\n  },\n\n  methods: {\n    getWorkouts() {\n      let endpoint = \"api/workouts/\";\n\n      if (this.next) {\n        endpoint = this.next;\n      }\n\n      this.loading = true;\n      apiService(endpoint).then(data => {\n        this.workouts.push(...data.results);\n        this.loading = false;\n\n        if (data.next) {\n          this.next = data.next;\n        } else {\n          this.next = null;\n        }\n      });\n    },\n\n    getUser() {\n      let endpoint = \"api/user/\";\n\n      if (this.next) {\n        endpoint = this.next;\n      }\n\n      this.loading = true;\n      apiService(endpoint).then(data => {\n        this.user_list = data.results[0];\n      });\n    },\n\n    onSubmit() {\n      let endpoint = \"/api/workouts/\";\n      let method = \"POST\";\n      apiService(endpoint, method, {\n        part_of_body: this.part_of_body,\n        workout: this.workout,\n        memo: this.memo\n      }).then(this.$router.go({\n        path: this.$router.currentRoute.path,\n        force: true\n      }));\n    }\n\n  },\n\n  created() {\n    this.getWorkouts();\n    this.getUser(); // console.log(this.workouts);\n  }\n\n};","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4FA;AACA;EACAA,cADA;;EAEAC;IACA;MACAC,YADA;MAEAC,aAFA;MAGAC,UAHA;MAIAC,kBAJA;MAKAC,aALA;MAMAC,UANA;MAOAC,2CAPA;MAQAC,aARA;MASAC,UATA;MAUAC;IAVA;EAYA,CAfA;;EAgBAC;IACAC;MACA;;MACA;QACAC;MACA;;MACA;MACAC;QACA;QACA;;QACA;UACA;QACA,CAFA,MAEA;UACA;QACA;MACA,CARA;IASA,CAhBA;;IAiBAC;MACA;;MACA;QACAF;MACA;;MACA;MACAC;QACA;MACA,CAFA;IAGA,CA1BA;;IA2BAE;MACA;MACA;MACAF;QACAV,+BADA;QAEAC,qBAFA;QAGAC;MAHA,GAIAW,IAJA,CAKA;QAAAC;QAAAC;MAAA,EALA;IAOA;;EArCA,CAhBA;;EAwDAC;IACA;IACA,eAFA,CAGA;EACA;;AA5DA","names":["name","data","workouts","user_list","user","part_of_body","workout","memo","body_items","dialog","next","loading","methods","getWorkouts","endpoint","apiService","getUser","onSubmit","then","path","force","created"],"sourceRoot":"src/views","sources":["MyHome.vue"],"sourcesContent":["<template>\n  <div>\n    <v-row justify=\"space-around\">\n      <v-col cols=\"auto\">\n        <v-dialog transition=\"dialog-top-transition\" max-width=\"600\">\n          <template v-slot:activator=\"{ on, attrs }\">\n            <v-row justify=\"center\" class=\"my-1\">\n              <h3>\n                <p>{{ user_list.username }}さん、こんにちは！</p>\n              </h3>\n            </v-row>\n            <v-row justify=\"center\" class=\"my-5\">\n              <v-btn color=\"primary\" v-bind=\"attrs\" v-on=\"on\">追加</v-btn>\n            </v-row>\n            <v-row>\n              <div>トレーニングメニューの追加</div>\n            </v-row>\n          </template>\n          <template v-slot:default=\"dialog\">\n            <v-card>\n              <v-toolbar color=\"#1D1DF\" dark>追加</v-toolbar>\n              <v-card-text style=\"height: 400px\">\n                <form @submit.prevent=\"onSubmit\">\n                  <v-select\n                    required\n                    v-model=\"part_of_body\"\n                    label=\"部位\"\n                    :items=\"body_items\"\n                  >\n                  </v-select>\n\n                  <v-text-field\n                    v-model=\"workout\"\n                    label=\"メニュー\"\n                    required\n                  ></v-text-field>\n\n                  <v-textarea v-model=\"memo\" label=\"メモ\"></v-textarea>\n                  <v-btn color=\"primary\" @click=\"dialog.value = false\" text>\n                    戻る\n                  </v-btn>\n                  <v-btn\n                    v-if=\"part_of_body && workout\"\n                    color=\"primary\"\n                    type=\"submit\"\n                    @click=\"dialog.value = false\"\n                  >\n                    保存\n                  </v-btn>\n                </form>\n              </v-card-text>\n            </v-card>\n          </template>\n        </v-dialog>\n      </v-col>\n    </v-row>\n    <v-main>\n      <div v-if=\"workouts[0]\">\n        <div v-for=\"workout in workouts\" :key=\"workout.pk\">\n          <h2>\n            <router-link\n              :to=\"{ name: 'workout', params: { id: workout.id } }\"\n              class=\"workout-link\"\n            >\n              <v-card class=\"my-5 mx-3\" color=\"#fbfbfd\" elevation=\"10\">\n                <v-card-title> {{ workout.part_of_body }}</v-card-title>\n                <v-card-text style=\"size: 100px\">{{\n                  workout.workout\n                }}</v-card-text>\n              </v-card>\n            </router-link>\n          </h2>\n        </div>\n      </div>\n      <div v-else>\n        <v-container class=\"text-center\"\n          >メニューはまだありません。</v-container\n        >\n      </div>\n      <v-row justify=\"space-around\">\n        <v-col cols=\"auto\">\n          <p v-show=\"loading\">...ローディング...</p>\n          <v-btn v-show=\"next\" @click=\"getWorkouts\" color=\"primary\" text\n            >もっと見る\n          </v-btn>\n        </v-col>\n      </v-row>\n    </v-main>\n  </div>\n</template>\n\n<script>\nimport { apiService } from \"../common/api.service.js\";\nexport default {\n  name: \"MyHome\",\n  data() {\n    return {\n      workouts: [],\n      user_list: {},\n      user: null,\n      part_of_body: null,\n      workout: null,\n      memo: null,\n      body_items: [\"腹\", \"腕\", \"背中\", \"胸\", \"脚\", \"肩\"],\n      dialog: false,\n      next: null,\n      loading: false,\n    };\n  },\n  methods: {\n    getWorkouts() {\n      let endpoint = \"api/workouts/\";\n      if (this.next) {\n        endpoint = this.next;\n      }\n      this.loading = true;\n      apiService(endpoint).then((data) => {\n        this.workouts.push(...data.results);\n        this.loading = false;\n        if (data.next) {\n          this.next = data.next;\n        } else {\n          this.next = null;\n        }\n      });\n    },\n    getUser() {\n      let endpoint = \"api/user/\";\n      if (this.next) {\n        endpoint = this.next;\n      }\n      this.loading = true;\n      apiService(endpoint).then((data) => {\n        this.user_list = data.results[0];\n      });\n    },\n    onSubmit() {\n      let endpoint = \"/api/workouts/\";\n      let method = \"POST\";\n      apiService(endpoint, method, {\n        part_of_body: this.part_of_body,\n        workout: this.workout,\n        memo: this.memo,\n      }).then(\n        this.$router.go({ path: this.$router.currentRoute.path, force: true })\n      );\n    },\n  },\n\n  created() {\n    this.getWorkouts();\n    this.getUser();\n    // console.log(this.workouts);\n  },\n};\n</script>\n"]},"metadata":{},"sourceType":"module"}