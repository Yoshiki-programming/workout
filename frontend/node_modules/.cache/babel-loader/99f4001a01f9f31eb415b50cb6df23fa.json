{"ast":null,"code":"import _toConsumableArray from \"/Users/yoshiki_work/\\u30DB\\u309A\\u30FC\\u30C8\\u30D5\\u30A9\\u30EA\\u30AA/workout/frontend/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";\nimport \"core-js/modules/es.number.constructor.js\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { apiService } from \"../common/api.service.js\";\nexport default {\n  name: \"MyRecord\",\n  props: {\n    id: {\n      type: Number,\n      required: true\n    }\n  },\n  data: function data() {\n    return {\n      workoutrecords: [],\n      workout: null,\n      weight: null,\n      reps: null,\n      date: null,\n      memo: null,\n      next: null,\n      loading: false,\n      name: null\n    };\n  },\n  methods: {\n    getWorkoutRecords: function getWorkoutRecords() {\n      var _this = this;\n\n      var endpoint = \"/api/workout-records/\".concat(this.id, \"/\");\n\n      if (this.next) {\n        endpoint = this.next;\n      }\n\n      this.loading = true;\n      apiService(endpoint).then(function (data) {\n        var _this$workoutrecords;\n\n        (_this$workoutrecords = _this.workoutrecords).push.apply(_this$workoutrecords, _toConsumableArray(data.results));\n\n        _this.loading = false;\n\n        if (data.next) {\n          _this.next = data.next;\n        } else {\n          _this.next = null;\n        }\n\n        console.log(_this.workoutrecords);\n      });\n    },\n    onSubmit: function onSubmit() {\n      var endpoint = \"/api/workout-records/\".concat(this.id);\n      var method = \"POST\";\n      var now = new Date();\n      console.log(now.getDate());\n      apiService(endpoint, method, {\n        workout: this.id,\n        weight: this.weight,\n        reps: this.reps,\n        date: now.getDate(),\n        memo: this.memo\n      }).then(this.$router.go({\n        path: this.$router.currentRoute.path,\n        force: true\n      }));\n    }\n  },\n  created: function created() {\n    this.getWorkoutRecords(); // console.log(\"record\", this.workoutrecords);\n    // console.log(\"id:\", this.id);\n  }\n};","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkFA;AACA;EACAA,gBADA;EAEAC;IACAC;MACAC,YADA;MAEAC;IAFA;EADA,CAFA;EAQAC,IARA,kBAQA;IACA;MACAC,kBADA;MAEAC,aAFA;MAGAC,YAHA;MAIAC,UAJA;MAKAC,UALA;MAMAC,UANA;MAOAC,UAPA;MAQAC,cARA;MASAb;IATA;EAWA,CApBA;EAqBAc;IACAC,iBADA,+BACA;MAAA;;MACA;;MACA;QACAC;MACA;;MACA;MACAC;QAAA;;QACA;;QACA;;QACA;UACA;QACA,CAFA,MAEA;UACA;QACA;;QACAC;MACA,CATA;IAUA,CAjBA;IAkBAC,QAlBA,sBAkBA;MACA;MACA;MACA;MACAD;MACAD;QACAV,gBADA;QAEAC,mBAFA;QAGAC,eAHA;QAIAC,mBAJA;QAKAC;MALA,GAMAS,IANA,CAOA;QAAAC;QAAAC;MAAA,EAPA;IASA;EAhCA,CArBA;EAuDAC,OAvDA,qBAuDA;IACA,yBADA,CAEA;IACA;EACA;AA3DA","names":["name","props","id","type","required","data","workoutrecords","workout","weight","reps","date","memo","next","loading","methods","getWorkoutRecords","endpoint","apiService","console","onSubmit","then","path","force","created"],"sourceRoot":"src/views","sources":["MyWorkoutRecord.vue"],"sourcesContent":["<template>\n  <div>\n    <v-container style=\"size: 150px\">筋トレの記録</v-container>\n    <v-row justify=\"space-around\">\n      <v-col cols=\"auto\">\n        <v-dialog transition=\"dialog-top-transition\" max-width=\"600\">\n          <template v-slot:activator=\"{ on, attrs }\">\n            <v-btn color=\"success\" v-bind=\"attrs\" v-on=\"on\">+</v-btn>\n          </template>\n          <template v-slot:default=\"dialog\">\n            <v-card>\n              <v-toolbar color=\"success\" dark>記録する</v-toolbar>\n              <v-card-title>記録する</v-card-title>\n              <v-divider></v-divider>\n              <v-card-text style=\"height: 400px\">\n                <form @submit.prevent=\"onSubmit\">\n                  <v-text-field required v-model=\"weight\" label=\"重さ\">\n                  </v-text-field>\n\n                  <v-text-field\n                    v-model=\"reps\"\n                    label=\"回数\"\n                    required\n                  ></v-text-field>\n\n                  <v-textarea v-model=\"memo\" label=\"メモ\"></v-textarea>\n                  <v-btn color=\"success\" text @click=\"dialog.value = false\">\n                    閉じる\n                  </v-btn>\n                  <v-btn\n                    v-if=\"reps\"\n                    color=\"success\"\n                    type=\"submit\"\n                    text\n                    @click=\"dialog.value = false\"\n                  >\n                    保存する\n                  </v-btn>\n                </form>\n              </v-card-text>\n            </v-card>\n          </template>\n        </v-dialog>\n      </v-col>\n    </v-row>\n    <v-main>\n      <div v-for=\"record in workoutrecords\" :key=\"record.pk\">\n        <h2>\n          <router-link\n            :to=\"{ name: 'RecordEdit', params: { id: record.id } }\"\n            class=\"myworkoutrecord-link\"\n          >\n            <v-card>\n              <v-card-title>\n                {{ record.workout.workout }} /\n                {{ record.workout.part_of_body }}</v-card-title\n              >\n              <v-card-text style=\"size: 50px\"\n                >{{ record.weight }} KG</v-card-text\n              >\n              <v-card-text style=\"size: 50px\"\n                >{{ record.reps }} REPS</v-card-text\n              >\n              <v-card-text style=\"size: 50px\"\n                >MEMO：{{ record.memo }}</v-card-text\n              >\n              <v-card-text style=\"size: 50px\">{{ record.date }}</v-card-text>\n            </v-card>\n          </router-link>\n        </h2>\n      </div>\n      <div class=\"my-4\">\n        <p v-show=\"loading\">...loading...</p>\n        <v-btn v-show=\"next\" @click=\"getWorkoutRecords\" color=\"success\"\n          >MORE\n        </v-btn>\n      </div>\n    </v-main>\n  </div>\n</template>\n\n<script>\nimport { apiService } from \"../common/api.service.js\";\nexport default {\n  name: \"MyRecord\",\n  props: {\n    id: {\n      type: Number,\n      required: true,\n    },\n  },\n  data() {\n    return {\n      workoutrecords: [],\n      workout: null,\n      weight: null,\n      reps: null,\n      date: null,\n      memo: null,\n      next: null,\n      loading: false,\n      name: null,\n    };\n  },\n  methods: {\n    getWorkoutRecords() {\n      let endpoint = `/api/workout-records/${this.id}/`;\n      if (this.next) {\n        endpoint = this.next;\n      }\n      this.loading = true;\n      apiService(endpoint).then((data) => {\n        this.workoutrecords.push(...data.results);\n        this.loading = false;\n        if (data.next) {\n          this.next = data.next;\n        } else {\n          this.next = null;\n        }\n        console.log(this.workoutrecords);\n      });\n    },\n    onSubmit() {\n      let endpoint = `/api/workout-records/${this.id}`;\n      let method = \"POST\";\n      let now = new Date();\n      console.log(now.getDate());\n      apiService(endpoint, method, {\n        workout: this.id,\n        weight: this.weight,\n        reps: this.reps,\n        date: now.getDate(),\n        memo: this.memo,\n      }).then(\n        this.$router.go({ path: this.$router.currentRoute.path, force: true })\n      );\n    },\n  },\n  created() {\n    this.getWorkoutRecords();\n    // console.log(\"record\", this.workoutrecords);\n    // console.log(\"id:\", this.id);\n  },\n};\n</script>\n"]},"metadata":{},"sourceType":"module"}